{{#if errorMessage}}
    <div id="error">{{errorMessage}}</div>
{{/if}}

<header class="profileHeader">
    <div class="container">
        <div class="row gx-5 align-items-start justify-content-center">
            <div class="col-lg-8 col-xl-7 col-xxl-6">
                <div class="my-5 text-center text-xl-start">
                    <h1 class="display-5 fw-bolder text-white mb-2">Bienvenido <span
                            class="capitaliced"
                        >{{user.username}}</span></h1>
                    <div
                        class="d-grid gap-3 d-sm-flex justify-content-sm-center justify-content-xl-start"
                    >

                        {{#if isLeader}}
                            <a class="btn btn-light btn-sm px-4 me-sm-3" href="/profile/gym">Tu
                                PokeGym</a>
                        {{/if}}

                        <a
                            class="btn btn-light btn-sm px-4 me-sm-3"
                            href="/profile/{{user._id}}/edit"
                        >Editar Perfil</a>
                        <a
                            class="btn btn-dark btn-sm px-4"
                            href="/profile/{{user._id}}/delete"
                        >Eliminar Perfil</a>

                    </div>

                    <div>
                        <hr />
                    </div>
                    <div
                        class="d-grid gap-3 d-sm-flex justify-content-sm-center justify-content-xl-start"
                    >

                        {{#if isAdmin}}

                            {{#if isLeader}}

                                <a
                                    class="btn btn-outline-light btn-md px-4 me-sm-3"
                                    href="/profile/gym "
                                >Tu PokeGym</a>

                            {{/if}}
                            <a
                                class="btn btn-outline-light btn-md px-4 me-sm-3"
                                href="/profile/list"
                            >Lista de usuarios</a>
                            <a
                                class="btn btn-outline-light btn-md px-4 me-sm-3"
                                href="/profile/gym/create "
                            >Crear nuevo Gimnasio</a>

                        {{/if}}

                    </div>
                </div>
            </div>
            <div class="profileImage col-xl-5 col-xxl-6 d-none d-xl-block text-center">
                <img
                    class="img-fluid rounded-3 my-5"
                    src="{{user.img}}"
                    alt="foto de {{user.username}}"
                />
            </div>
        </div>
    </div>
</header>

{{#if isAdmin}}

    <section class="profileGyms pt">
        <div class="container px-4 px-lg-5">
            <h2> TUS GIMNASIOS</h2>
            <div
                class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-3 justify-content-center"
            >
                {{#each viewInfo.allGyms}}

                    <div class="col mb-5">
                        <div class="card h-80 p-4 gymCard">
                            <!-- Product image-->
                            <div >
                                <img src="{{img}}" alt="imagen gimnasio pokemon " />

                            </div>

                            <!-- Product details-->
                            <div class="card-body p-4">
                                <div class="text-center">

                                    <article>

                                        <h5 class="card-title"> Nombre del Gimnasio: <span class="capitaliced ">{{name}}</span></h5>
                                        <p class="card-text ">Nombre del Leader: <span class="capitaliced">{{leader.username}}</span></p>
                                        <p class="card-text capitaliced">Location: <span class="capitaliced">{{location}}</span> </p>

                                    </article>

                                    <div
                                        class=" mt-3 d-grid gap-3 d-md-flex align-items-start justify-content-md-start"
                                    >

                                        <a class="btn btn-outline-light btn-md px-4 me-sm-3"
                                            href="/profile/gym/{{_id}}/edit"
                                        > Editar</a>

                                        <form action="/profile/gym/{{_id}}/delete" method="POST">
                                            <button
                                                class="btn btn-md btn-dark"
                                                type="submit"
                                            >Eliminar</button>
                                        </form>

                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>

                {{/each}}

            </div>
        </div>
    </section>

{{/if}}

<section class="profilePokemons pt">
    <div class="container px-4 px-lg-5">
        <h2> TUS POKEMONS </h2>

        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-5 justify-content-center">

            {{#each viewInfo.allPokemons}}

                <div class="col mb-3">
                    <div class="card pokemonCard h-100 p-4">
                        <!-- Product image-->

                        <div>

                            <img
                                src="{{sprites.other.dream_world.front_default}}"
                                alt="image {{name}}"
                            />
                        </div>

                        <!-- Product details-->
                        <div class="card-body p-2 center">
                            <div class="text-center">
                                <a
                                    class="btn btn-outline-dark btn-md"
                                    href="/pokemons/{{name}}"
                                ><span class="capitaliced">{{name}}</span></a>

                            </div>
                        </div>
                        <!-- Product actions-->

                    </div>
                </div>

            {{/each}}

        </div>
    </div>
</section>

<section class="profileEvents pt">
    <div class="container px-4 px-lg-5">
        <h2> TUS EVENTOS </h2>
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-3 justify-content-center">
            {{#each viewInfo.allEvents}}

                <div class="col ">
                    <div class="card h-80 p-4 eventCard">
                        <!-- Product image-->
                        <img src="{{img}}" alt="imagen evento pokemon " />
                        <!-- Product details-->
                        <div class="card-body p-4">
                            <div class="text-center">

                                <h5 class="card-title capitaliced">Nombre del Evento: {{name}}</h5>
                                <p class="card-text capitaliced">Detalles: {{details}}</p>
                                <p class="card-text capitaliced">Fecha: {{date}}</p>
                                <p class="card-text capitaliced">Lugar: {{location}}</p>
                                <p>Tus Pokemons a ganar:</p>
                                {{#each pokemons}}
                                    <a class="capitaliced" href="/pokemons/{{this}}">{{this}},</a>
                                {{/each}} 

                            </div>
                        </div>
                        <!-- Product actions-->

                    </div>
                </div>

            {{/each}}

        </div>
    </div>
</section>